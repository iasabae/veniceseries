<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î≤†ÎÑ§ÏπòÏïÑ Í∏âÏàò Í≤åÏûÑ</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };
    </script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: 
                /* Íµ¨Î¶Ñ Ìö®Í≥º */
                radial-gradient(ellipse at 20% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 40%),
                radial-gradient(ellipse at 70% 20%, rgba(255, 255, 255, 0.2) 0%, transparent 35%),
                radial-gradient(ellipse at 40% 10%, rgba(255, 255, 255, 0.15) 0%, transparent 30%),
                /* ÌÉúÏñë Ìö®Í≥º */
                radial-gradient(circle at 85% 15%, rgba(255, 215, 0, 0.4) 0%, rgba(255, 165, 0, 0.2) 20%, transparent 40%),
                /* ÌïòÎäò Í∑∏ÎùºÎç∞Ïù¥ÏÖò */
                linear-gradient(180deg, 
                    #87CEEB 0%, 
                    #4682B4 30%, 
                    #5F9EA0 60%, 
                    #2F4F4F 80%, 
                    #1e3a5f 100%);
            overflow: hidden;
            height: 100vh;
            touch-action: none;
            animation: skyBreathing 20s ease-in-out infinite alternate;
        }

        @keyframes skyBreathing {
            0% {
                filter: brightness(1) saturate(1);
            }
            100% {
                filter: brightness(1.1) saturate(1.2);
            }
        }

        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: 
                /* Íµ¨Î¶Ñ ÏõÄÏßÅÏûÑ Ìö®Í≥º */
                radial-gradient(ellipse at 15% 25%, rgba(255, 255, 255, 0.25) 0%, transparent 45%),
                radial-gradient(ellipse at 75% 15%, rgba(255, 255, 255, 0.2) 0%, transparent 40%),
                radial-gradient(ellipse at 45% 5%, rgba(255, 255, 255, 0.15) 0%, transparent 35%),
                /* ÏÉàÎì§ Ïã§Î£®Ïó£ */
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><path d="M10,10 Q12,8 14,10 Q16,8 18,10 M30,12 Q32,10 34,12 Q36,10 38,12 M60,8 Q62,6 64,8 Q66,6 68,8" stroke="%23ffffff" stroke-width="0.8" fill="none" opacity="0.4"/></svg>') repeat-x,
                /* Î¨ºÍ≤∞ Ìö®Í≥º */
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><path d="M0,15 Q25,10 50,15 T100,15" stroke="%23ffffff" stroke-width="0.6" fill="none" opacity="0.3"/></svg>') repeat-x bottom;
            background-size: auto, auto, 200px 30px, 150px 20px;
            background-position: 0 0, 0 0, 0 20px, 0 bottom;
            display: none;
            animation: backgroundFloat 30s ease-in-out infinite;
        }

        @keyframes backgroundFloat {
            0%, 100% {
                background-position: 0 0, 0 0, 0 20px, 0 bottom;
            }
            50% {
                background-position: -50px 0, 30px 0, -100px 25px, -75px bottom;
            }
        }

        #gameContainer.active {
            display: block;
        }

        #gameCanvas {
            position: absolute;
            top: 0;
            left: 0;
        }

        #ui {
            position: absolute;
            top: 15px;
            left: 15px;
            color: white;
            z-index: 100;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            background: linear-gradient(135deg, 
                rgba(0,0,0,0.3) 0%, 
                rgba(0,0,0,0.1) 100%);
            backdrop-filter: blur(15px) saturate(1.2);
            border-radius: 15px;
            padding: 12px 16px;
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 
                0 6px 24px rgba(0,0,0,0.4),
                inset 0 2px 4px rgba(255,255,255,0.1);
        }

        #score {
            font-size: 24px;
            font-weight: 900;
            margin-bottom: 8px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.8));
        }

        #hearts {
            font-size: 20px;
            margin-bottom: 8px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.8));
        }

        #level {
            font-size: 18px;
            font-weight: 700;
            color: #87CEEB;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.8));
        }

        .series {
            position: absolute;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.98) 0%, 
                rgba(240, 248, 255, 0.95) 50%, 
                rgba(230, 245, 255, 0.92) 100%);
            border: 4px solid rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            width: 120px;
            height: 120px;
            box-shadow: 
                0 15px 35px rgba(0,0,0,0.4),
                0 5px 15px rgba(0,0,0,0.2),
                inset 0 2px 0 rgba(255,255,255,0.8),
                inset 0 -2px 0 rgba(0,0,0,0.1);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            user-select: none;
            backdrop-filter: blur(15px) saturate(1.2);
            font-family: 'Times New Roman', serif;
            color: #1a365d;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: scale(1);
        }

        .series.golden {
            background: linear-gradient(135deg, 
                rgba(255, 215, 0, 0.98) 0%, 
                rgba(255, 223, 0, 0.95) 30%, 
                rgba(255, 193, 7, 0.92) 70%, 
                rgba(255, 165, 0, 0.9) 100%);
            border: 4px solid rgba(255, 215, 0, 0.9);
            box-shadow: 
                0 15px 35px rgba(255, 215, 0, 0.6),
                0 5px 15px rgba(255, 215, 0, 0.4),
                inset 0 2px 0 rgba(255, 255, 255, 0.9),
                inset 0 -2px 0 rgba(255, 165, 0, 0.3),
                0 0 30px rgba(255, 215, 0, 0.5);
            animation: goldenPulse 2s ease-in-out infinite alternate;
            color: #8B4513;
        }

        /* .series::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, 
                rgba(255, 107, 107, 0.7) 0%,
                rgba(255, 159, 64, 0.6) 15%,
                rgba(255, 206, 84, 0.5) 30%,
                rgba(75, 192, 192, 0.4) 45%,
                rgba(54, 162, 235, 0.3) 60%,
                rgba(153, 102, 255, 0.2) 75%,
                rgba(255, 99, 132, 0.1) 100%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: -1;
            filter: blur(2px);
            animation: circularPulse 2s ease-in-out infinite;
        } */

        .series:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 
                0 25px 50px rgba(0,0,0,0.5),
                0 10px 25px rgba(0,0,0,0.3),
                inset 0 2px 0 rgba(255,255,255,0.9);
        }

        .series .MathJax {
            font-size: 1.5em !important;
            color: #1a365d !important;
        }

        .series .MathJax_Display {
            margin: 0 !important;
        }

        .series mjx-container {
            color: #1a365d !important;
        }

        .series mjx-container mjx-math {
            color: #1a365d !important;
        }

        .series.golden .MathJax {
            color: #8B4513 !important;
        }

        .series.golden mjx-container {
            color: #8B4513 !important;
        }

        .series.golden mjx-container mjx-math {
            color: #8B4513 !important;
        }

        /* @keyframes seriesGlow {
            0% {
                box-shadow: 
                    0 15px 35px rgba(0,0,0,0.4),
                    0 5px 15px rgba(0,0,0,0.2),
                    inset 0 2px 0 rgba(255,255,255,0.8),
                    0 0 20px rgba(255, 107, 107, 0.4);
            }
            100% {
                box-shadow: 
                    0 15px 35px rgba(0,0,0,0.4),
                    0 5px 15px rgba(0,0,0,0.2),
                    inset 0 2px 0 rgba(255,255,255,0.8),
                    0 0 30px rgba(153, 102, 255, 0.6);
            }
        }

        @keyframes circularPulse {
            0% {
                width: 20px;
                height: 20px;
                opacity: 0.8;
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                width: 140px;
                height: 140px;
                opacity: 0.3;
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                width: 20px;
                height: 20px;
                opacity: 0.8;
                transform: translate(-50%, -50%) scale(1);
            }
        } */

        @keyframes goldenPulse {
            0% {
                box-shadow: 
                    0 15px 35px rgba(255, 215, 0, 0.6),
                    0 5px 15px rgba(255, 215, 0, 0.4),
                    inset 0 2px 0 rgba(255, 255, 255, 0.9),
                    inset 0 -2px 0 rgba(255, 165, 0, 0.3),
                    0 0 30px rgba(255, 215, 0, 0.5);
                transform: scale(1);
            }
            100% {
                box-shadow: 
                    0 15px 35px rgba(255, 215, 0, 0.8),
                    0 5px 15px rgba(255, 215, 0, 0.6),
                    inset 0 2px 0 rgba(255, 255, 255, 0.9),
                    inset 0 -2px 0 rgba(255, 165, 0, 0.3),
                    0 0 50px rgba(255, 215, 0, 0.8);
                transform: scale(1.02);
            }
        }

        @keyframes failShake {
            0%, 100% { 
                transform: translateX(0);
                opacity: 1;
            }
            10%, 30%, 50%, 70%, 90% {
                transform: translateX(-5px);
            }
            20%, 40%, 60%, 80% {
                transform: translateX(5px);
            }
            100% {
                opacity: 0;
            }
        }

        .bomb {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 5px solid rgba(255,255,255,0.9);
            font-size: 20px;
            font-weight: bold;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 
                0 8px 25px rgba(0,0,0,0.4),
                0 3px 10px rgba(0,0,0,0.3),
                inset 0 3px 6px rgba(255,255,255,0.4);
            backdrop-filter: blur(10px);
        }

        .convergent-bomb {
            background: radial-gradient(circle at 30% 30%, 
                #66BB6A 0%, 
                #4CAF50 30%, 
                #2E7D32 70%, 
                #1B5E20 100%);
            border-color: rgba(200, 230, 201, 0.9);
            box-shadow: 
                0 8px 25px rgba(76, 175, 80, 0.7), 
                0 3px 10px rgba(76, 175, 80, 0.5),
                inset 0 3px 6px rgba(255,255,255,0.4),
                0 0 20px rgba(76, 175, 80, 0.3);
            animation: convergentPulse 2s ease-in-out infinite alternate;
        }

        .convergent-bomb::before {
            content: "‚úì";
            font-size: 36px;
            color: white;
            text-shadow: 
                2px 2px 4px rgba(0,0,0,0.8),
                0 0 10px rgba(255,255,255,0.5);
            font-weight: 900;
        }

        .divergent-bomb {
            background: radial-gradient(circle at 30% 30%, 
                #EF5350 0%, 
                #F44336 30%, 
                #C62828 70%, 
                #B71C1C 100%);
            border-color: rgba(255, 205, 210, 0.9);
            box-shadow: 
                0 8px 25px rgba(244, 67, 54, 0.7),
                0 3px 10px rgba(244, 67, 54, 0.5),
                inset 0 3px 6px rgba(255,255,255,0.4),
                0 0 20px rgba(244, 67, 54, 0.3);
            animation: divergentPulse 2s ease-in-out infinite alternate;
        }

        .divergent-bomb::before {
            content: "‚úó";
            font-size: 40px;
            color: white;
            text-shadow: 
                2px 2px 4px rgba(0,0,0,0.8),
                0 0 10px rgba(255,255,255,0.5);
            font-weight: 900;
        }

        .bomb:hover {
            transform: scale(1.15) translateY(-8px);
            box-shadow: 
                0 15px 40px rgba(0,0,0,0.5),
                0 5px 15px rgba(0,0,0,0.4);
        }

        .bomb:active {
            transform: scale(1.05) translateY(-4px);
        }

        @keyframes convergentPulse {
            0% {
                box-shadow: 
                    0 8px 25px rgba(76, 175, 80, 0.7), 
                    0 3px 10px rgba(76, 175, 80, 0.5),
                    inset 0 3px 6px rgba(255,255,255,0.4),
                    0 0 15px rgba(76, 175, 80, 0.3);
            }
            100% {
                box-shadow: 
                    0 8px 25px rgba(76, 175, 80, 0.7), 
                    0 3px 10px rgba(76, 175, 80, 0.5),
                    inset 0 3px 6px rgba(255,255,255,0.4),
                    0 0 30px rgba(76, 175, 80, 0.6);
            }
        }

        @keyframes divergentPulse {
            0% {
                box-shadow: 
                    0 8px 25px rgba(244, 67, 54, 0.7),
                    0 3px 10px rgba(244, 67, 54, 0.5),
                    inset 0 3px 6px rgba(255,255,255,0.4),
                    0 0 15px rgba(244, 67, 54, 0.3);
            }
            100% {
                box-shadow: 
                    0 8px 25px rgba(244, 67, 54, 0.7),
                    0 3px 10px rgba(244, 67, 54, 0.5),
                    inset 0 3px 6px rgba(255,255,255,0.4),
                    0 0 30px rgba(244, 67, 54, 0.6);
            }
        }

        .bomb-launcher {
            position: absolute;
            bottom: 20px;
            width: 100%;
            height: 150px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 50;
            padding: 0 20px;
            box-sizing: border-box;
        }

        .launcher-slot {
            width: 110px;
            height: 110px;
            border: 4px dashed rgba(255,255,255,0.7);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, 
                rgba(255,255,255,0.15) 0%, 
                rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(15px) saturate(1.2);
            box-shadow: 
                0 8px 32px rgba(0,0,0,0.3),
                inset 0 2px 4px rgba(255,255,255,0.2);
            transition: all 0.3s ease;
            animation: slotGlow 3s ease-in-out infinite alternate;
        }

        .launcher-slot:hover {
            border-color: rgba(255,255,255,0.9);
            background: linear-gradient(135deg, 
                rgba(255,255,255,0.25) 0%, 
                rgba(255,255,255,0.1) 100%);
            transform: scale(1.05);
        }

        @keyframes slotGlow {
            0% {
                box-shadow: 
                    0 8px 32px rgba(0,0,0,0.3),
                    inset 0 2px 4px rgba(255,255,255,0.2),
                    0 0 20px rgba(255,255,255,0.1);
            }
            100% {
                box-shadow: 
                    0 8px 32px rgba(0,0,0,0.3),
                    inset 0 2px 4px rgba(255,255,255,0.2),
                    0 0 30px rgba(255,255,255,0.2);
            }
        }

        .aim-indicator {
            position: absolute;
            width: 130px;
            height: 130px;
            border: 3px dashed rgba(255,255,255,0.8);
            border-radius: 50%;
            display: none;
            z-index: 60;
            pointer-events: none;
        }

        .aim-arrow {
            position: absolute;
            width: 78px; /* 30% Ï¶ùÍ∞Ä (60 * 1.3) */
            height: 4px;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            border-radius: 2px;
            transform-origin: left center;
            display: none;
            z-index: 61;
            pointer-events: none;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
        }

        .aim-arrow::after {
            content: '';
            position: absolute;
            right: -8px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 12px solid #FFA500;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
            filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.6));
        }

        .aiming {
            animation: aimingPulse 0.5s ease-in-out infinite alternate;
        }

        @keyframes aimingPulse {
            0% {
                transform: scale(1);
                box-shadow: 
                    0 8px 25px rgba(76, 175, 80, 0.7), 
                    0 3px 10px rgba(76, 175, 80, 0.5),
                    inset 0 3px 6px rgba(255,255,255,0.4),
                    0 0 20px rgba(255, 215, 0, 0.5);
            }
            100% {
                transform: scale(1.05);
                box-shadow: 
                    0 8px 25px rgba(76, 175, 80, 0.7), 
                    0 3px 10px rgba(76, 175, 80, 0.5),
                    inset 0 3px 6px rgba(255,255,255,0.4),
                    0 0 30px rgba(255, 215, 0, 0.8);
            }
        }

        .explosion {
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            pointer-events: none;
            animation: explode 0.8s ease-out forwards;
            z-index: 70;
        }

        .correct-explosion {
            background: radial-gradient(circle, #4CAF50, #81C784, #C8E6C9, transparent);
            box-shadow: 0 0 50px #4CAF50, 0 0 100px #4CAF50;
        }

        .series-explosion {
            background: radial-gradient(circle, #FFD700, #FFF176, transparent);
            box-shadow: 0 0 40px #FFD700;
            width: 80px;
            height: 80px;
            animation: seriesExplode 0.6s ease-out forwards;
        }

        .absorption-effect {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: radial-gradient(circle, transparent, #F44336, transparent);
            animation: absorb 0.6s ease-in forwards;
            z-index: 70;
        }

        .series-reject-glow {
            position: absolute;
            width: 200px;
            height: 100px;
            border-radius: 15px;
            background: rgba(244, 67, 54, 0.3);
            animation: rejectGlow 0.8s ease-out forwards;
            z-index: 60;
        }

        .score-popup {
            position: absolute;
            color: #4CAF50;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            animation: scoreFloat 1s ease-out forwards;
            z-index: 80;
            pointer-events: none;
        }

        .fail-popup {
            position: absolute;
            color: #F44336;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            animation: failShake 1.2s ease-out forwards;
            z-index: 80;
            pointer-events: none;
        }

        .heart-gain-popup {
            position: absolute;
            color: #E91E63;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            animation: heartGainFloat 1.5s ease-out forwards;
            z-index: 80;
            pointer-events: none;
        }

        @keyframes explode {
            0% { 
                transform: scale(0) rotate(0deg); 
                opacity: 1; 
            }
            30% {
                transform: scale(1.2) rotate(120deg);
                opacity: 0.9;
            }
            70% {
                transform: scale(2) rotate(270deg);
                opacity: 0.6;
            }
            100% { 
                transform: scale(4) rotate(360deg); 
                opacity: 0; 
            }
        }

        @keyframes seriesExplode {
            0% { 
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1.3) rotate(180deg);
                opacity: 0.7;
            }
            100% { 
                transform: scale(2.5) rotate(360deg);
                opacity: 0; 
            }
        }

        @keyframes seriesDissolve {
            0% { 
                transform: scale(1);
                opacity: 1;
                filter: brightness(1);
            }
            30% {
                transform: scale(0.9);
                opacity: 0.8;
                filter: brightness(0.5) hue-rotate(180deg);
            }
            70% {
                transform: scale(0.7);
                opacity: 0.4;
                filter: brightness(0.2) hue-rotate(270deg);
            }
            100% { 
                transform: scale(0.3);
                opacity: 0;
                filter: brightness(0) hue-rotate(360deg);
            }
        }

        @keyframes absorb {
            0% { 
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(0.5);
                opacity: 0.8;
            }
            100% { 
                transform: scale(0);
                opacity: 0; 
            }
        }

        @keyframes rejectGlow {
            0% { 
                opacity: 0;
                transform: scale(1);
            }
            30% {
                opacity: 0.8;
                transform: scale(1.1);
            }
            100% { 
                opacity: 0;
                transform: scale(1);
            }
        }

        @keyframes scoreFloat {
            0% { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% { 
                opacity: 0;
                transform: translateY(-50px) scale(1.5);
            }
        }

        @keyframes heartGainFloat {
            0% { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            30% {
                opacity: 1;
                transform: translateY(-20px) scale(1.3);
            }
            100% { 
                opacity: 0;
                transform: translateY(-80px) scale(1.8);
            }
        }

        @keyframes wave {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(-50px); }
        }

        @keyframes fall {
            from { 
                transform: translateY(-100px); 
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            to { 
                transform: translateY(calc(100vh + 100px)); 
                opacity: 0.8;
            }
        }

        .falling {
            /* CSS Ïï†ÎãàÎ©îÏù¥ÏÖòÏùÄ ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÏùå - JavaScriptÎ°ú Ï†úÏñ¥ */
        }

        #gameIntro {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: 
                /* Ïò§Î≤ÑÎ†àÏù¥ Ìö®Í≥º */
                linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5)),
                /* Î≤†ÎÑ§ÏπòÏïÑ Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ */
                url('https://dimg.donga.com/ugc/CDB/SHINDONGA/Article/5c/d1/2f/bc/5cd12fbc0ceed2738de6.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            animation: introSkyBreathing 25s ease-in-out infinite alternate;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            z-index: 1000;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }





        @keyframes introSkyBreathing {
            0%, 100% {
                filter: brightness(1) saturate(1.1);
            }
            50% {
                filter: brightness(1.15) saturate(1.3);
            }
        }



        @keyframes waterFlow {
            0%, 100% { 
                transform: translateX(0);
                opacity: 0.6;
            }
            50% { 
                transform: translateX(-20px);
                opacity: 0.8;
            }
        }

        #gameIntro h1 {
            font-family: 'Georgia', 'Times New Roman', serif;
            font-size: 48px;
            font-style: italic;
            font-weight: bold;
            letter-spacing: 3px;
            text-transform: uppercase;
            margin-top: 30vh;
            margin-bottom: 30px;
            color: #4CAF50;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
        }

        #gameIntro .intro-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
        }

        #gameIntro .rule {
            background: 
                linear-gradient(135deg, 
                    rgba(255, 255, 255, 0.15) 0%, 
                    rgba(255, 255, 255, 0.08) 100%);
            border-radius: 15px;
            padding: 18px 20px;
            margin: 12px 0;
            backdrop-filter: blur(15px) saturate(1.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 2px 4px rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            animation: ruleFloat 8s ease-in-out infinite alternate;
        }

        #gameIntro .rule:hover {
            transform: translateY(-2px);
            background: 
                linear-gradient(135deg, 
                    rgba(255, 255, 255, 0.2) 0%, 
                    rgba(255, 255, 255, 0.12) 100%);
            box-shadow: 
                0 12px 40px rgba(0, 0, 0, 0.4),
                inset 0 2px 4px rgba(255, 255, 255, 0.15);
        }

        @keyframes ruleFloat {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-3px);
            }
        }

        #gameIntro .rule h3 {
            margin: 0 0 10px 0;
            font-size: 18px;
            color: #81C784;
        }

        #gameIntro .rule p {
            margin: 0;
            font-size: 14px;
            line-height: 1.4;
        }

        #startButton, #helpButton {
            font-size: 26px;
            padding: 18px 45px;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        #startButton {
            background: 
                linear-gradient(135deg, 
                    #4CAF50 0%, 
                    #66BB6A 50%, 
                    #81C784 100%);
            box-shadow: 
                0 8px 25px rgba(76, 175, 80, 0.5),
                0 4px 15px rgba(76, 175, 80, 0.3),
                inset 0 2px 4px rgba(255, 255, 255, 0.2);
            animation: buttonPulse 3s ease-in-out infinite;
        }

        #helpButton {
            background: 
                linear-gradient(135deg, 
                    #2196F3 0%, 
                    #42A5F5 50%, 
                    #64B5F6 100%);
            box-shadow: 
                0 8px 25px rgba(33, 150, 243, 0.5),
                0 4px 15px rgba(33, 150, 243, 0.3),
                inset 0 2px 4px rgba(255, 255, 255, 0.2);
        }

        #startButton::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.3) 50%, 
                transparent 100%);
            transition: left 0.6s ease;
        }

        #startButton:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: 
                0 12px 35px rgba(76, 175, 80, 0.7),
                0 6px 20px rgba(76, 175, 80, 0.5),
                inset 0 2px 4px rgba(255, 255, 255, 0.3);
        }

        #helpButton:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: 
                0 12px 35px rgba(33, 150, 243, 0.7),
                0 6px 20px rgba(33, 150, 243, 0.5),
                inset 0 2px 4px rgba(255, 255, 255, 0.3);
        }

        #startButton:hover::before {
            left: 100%;
        }

        #startButton:active, #helpButton:active {
            transform: translateY(-2px) scale(1.02);
        }

        /* ÏÑ§Î™Ö ÌåùÏóÖ Ïä§ÌÉÄÏùº */
        #helpPopup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease-out;
        }

        .popup-content {
            background: 
                linear-gradient(135deg, 
                    rgba(255, 255, 255, 0.95) 0%, 
                    rgba(240, 248, 255, 0.9) 100%);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.5),
                0 10px 30px rgba(0, 0, 0, 0.3),
                inset 0 2px 4px rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(15px) saturate(1.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            animation: popupSlideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .popup-content h2 {
            color: #1a365d;
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .close-hint {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-top: 20px;
            font-style: italic;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes popupSlideIn {
            from { 
                opacity: 0;
                transform: scale(0.8) translateY(50px);
            }
            to { 
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes buttonPulse {
            0%, 100% {
                box-shadow: 
                    0 8px 25px rgba(76, 175, 80, 0.5),
                    0 4px 15px rgba(76, 175, 80, 0.3),
                    inset 0 2px 4px rgba(255, 255, 255, 0.2);
            }
            50% {
                box-shadow: 
                    0 10px 30px rgba(76, 175, 80, 0.7),
                    0 5px 18px rgba(76, 175, 80, 0.5),
                    inset 0 2px 4px rgba(255, 255, 255, 0.25);
            }
        }

        #gameOver button {
            font-size: 18px;
            padding: 12px 30px;
            background: linear-gradient(45deg, #4CAF50, #66BB6A);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        #gameOver button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(76, 175, 80, 0.4);
        }

        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            display: none;
            z-index: 200;
            border: 2px solid #4CAF50;
        }

        .building {
            position: absolute;
            bottom: 140px;
            background: linear-gradient(180deg, 
                #D2691E 0%, 
                #CD853F 20%, 
                #A0522D 50%, 
                #8B4513 80%, 
                #654321 100%);
            border-top: 3px solid #654321;
            border-radius: 8px 8px 0 0;
            box-shadow: 
                0 0 20px rgba(0, 0, 0, 0.3),
                inset 0 2px 4px rgba(255, 255, 255, 0.1);
            animation: buildingSway 15s ease-in-out infinite alternate;
        }

        .building::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 20%;
            width: 60%;
            height: 8px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 215, 0, 0.6) 20%, 
                rgba(255, 215, 0, 0.8) 50%, 
                rgba(255, 215, 0, 0.6) 80%, 
                transparent 100%);
            border-radius: 4px;
        }

        .building::after {
            content: '';
            position: absolute;
            top: 25%;
            left: 15%;
            width: 70%;
            height: 6px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.3) 30%, 
                rgba(255, 255, 255, 0.5) 50%, 
                rgba(255, 255, 255, 0.3) 70%, 
                transparent 100%);
            border-radius: 3px;
        }

        @keyframes buildingSway {
            0%, 100% {
                transform: translateY(0);
                filter: brightness(1);
            }
            50% {
                transform: translateY(-2px);
                filter: brightness(1.1);
            }
        }

        .building1 {
            left: 10%;
            width: 80px;
            height: 120px;
            animation-delay: 0s;
        }

        .building2 {
            right: 15%;
            width: 100px;
            height: 150px;
            animation-delay: 5s;
        }

        .building3 {
            left: 70%;
            width: 60px;
            height: 100px;
            animation-delay: 10s;
        }

        .water {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 140px;
            background: 
                /* Î¨ºÍ≤∞ Î∞òÏÇ¨ Ìö®Í≥º */
                radial-gradient(ellipse at 30% 20%, rgba(135, 206, 235, 0.3) 0%, transparent 40%),
                radial-gradient(ellipse at 70% 30%, rgba(70, 130, 180, 0.2) 0%, transparent 35%),
                /* Í∏∞Î≥∏ Î¨º ÏÉâÏÉÅ */
                linear-gradient(180deg, 
                    rgba(30, 58, 95, 0.9) 0%, 
                    rgba(25, 45, 75, 0.95) 50%, 
                    rgba(15, 20, 25, 1) 100%);
            opacity: 0.9;
            animation: waterShimmer 8s ease-in-out infinite alternate;
        }

        .water::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 25px;
            background: 
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 15"><path d="M0,8 Q25,3 50,8 T100,8" stroke="%23ffffff" stroke-width="1.2" fill="none" opacity="0.5"/></svg>') repeat-x,
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 10"><path d="M0,5 Q37.5,2 75,5 T150,5" stroke="%2387CEEB" stroke-width="0.8" fill="none" opacity="0.3"/></svg>') repeat-x;
            background-size: 100px 15px, 150px 10px;
            animation: wave 4s ease-in-out infinite, waveSecond 6s ease-in-out infinite reverse;
        }

        .water::after {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 15px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 8"><path d="M0,4 Q30,1 60,4 T120,4" stroke="%234682B4" stroke-width="0.6" fill="none" opacity="0.4"/></svg>') repeat-x;
            background-size: 120px 8px;
            animation: wave 5s ease-in-out infinite reverse;
        }

        @keyframes waterShimmer {
            0%, 100% {
                filter: brightness(1) saturate(1);
            }
            50% {
                filter: brightness(1.2) saturate(1.3);
            }
        }

        @keyframes waveSecond {
            0%, 100% { 
                transform: translateX(0); 
            }
            50% { 
                transform: translateX(-30px); 
            }
        }

        .screen-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(255, 0, 0, 0.6);
            z-index: 1000;
            pointer-events: none;
            animation: flashScreen 0.5s ease-out forwards;
        }

        @keyframes flashScreen {
            0% { opacity: 0; }
            30% { opacity: 1; }
            100% { opacity: 0; }
        }

        .sup {
            font-size: 0.7em;
            vertical-align: super;
        }

        .sub {
            font-size: 0.7em;
            vertical-align: sub;
        }

        .series-hint {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 14px;
            z-index: 90;
        }
    </style>
</head>
<body>
    <div id="gameIntro">
                    <h1> VENICE <br>SERIES </h1>
        <div class="intro-buttons">
            <button id="helpButton">ÏÑ§Î™Ö</button>
            <button id="startButton">Í≤åÏûÑ ÏãúÏûë</button>
        </div>
    </div>

    <!-- ÏÑ§Î™Ö ÌåùÏóÖ -->
    <div id="helpPopup" style="display: none;">
        <div class="popup-content">
            <h2>üéÆ Í≤åÏûÑ ÏÑ§Î™Ö</h2>
            <div class="rule">
                <h3>üéØ Í≤åÏûÑ Î™©Ìëú</h3>
                <p>ÌïòÎäòÏóêÏÑú Îñ®Ïñ¥ÏßÄÎäî Í∏âÏàòÏùò ÏàòÎ†¥/Î∞úÏÇ∞ÏùÑ ÌåêÏ†ïÌïòÍ≥†<br>Ïò¨Î∞îÎ•∏ Ìè≠ÌÉÑÏúºÎ°ú ÎßûÏ∂∞Î≥¥ÏÑ∏Ïöî!</p>
            </div>
            <div class="rule">
                <h3>üéÆ Ï°∞Ïûë Î∞©Î≤ï</h3>
                <p><span style="color: #4CAF50;">ÏàòÎ†¥Ìè≠ÌÉÑ(‚úì)</span> ÎòêÎäî <span style="color: #F44336;">Î∞úÏÇ∞Ìè≠ÌÉÑ(‚úó)</span>ÏùÑ<br>ÌÅ¥Î¶≠Ìï¥ÏÑú Ï°∞Ï§ÄÌïòÍ≥†, Îã§Ïãú ÌÅ¥Î¶≠Ìï¥ÏÑú Î∞úÏÇ¨ÌïòÏÑ∏Ïöî!</p>
            </div>
            <div class="rule">
                <h3>üí° Í∏âÏàò ÏòàÏãú</h3>
                <p>‚àë 1/n¬≤ ‚Üí ÏàòÎ†¥ (p-Í∏âÏàò, p>1)<br>‚àë 1/n ‚Üí Î∞úÏÇ∞ (Ï°∞ÌôîÍ∏âÏàò)<br>‚àë 2‚Åø ‚Üí Î∞úÏÇ∞ (Í∏∞ÌïòÍ∏âÏàò, r>1)</p>
            </div>
            <div class="rule">
                <h3>‚ù§Ô∏è ÏÉùÎ™Ö</h3>
                <p>Í∏âÏàòÍ∞Ä Î¨ºÏóê ÎãøÍ±∞ÎÇò ÌãÄÎ¶¨Î©¥ ÌïòÌä∏ Í∞êÏÜå<br>5Î≤à Ïã§ÏàòÌïòÎ©¥ Í≤åÏûÑ Ïò§Î≤Ñ!</p>
            </div>
            <p class="close-hint">ÌôîÎ©¥ÏùÑ ÌÑ∞ÏπòÌïòÎ©¥ Îã´ÌûôÎãàÎã§</p>
        </div>
    </div>

    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        
        <div class="water"></div>
        <div class="building building1"></div>
        <div class="building building2"></div>
        <div class="building building3"></div>

        <div id="ui">
            <div id="score">Ï†êÏàò: 0</div>
            <div id="hearts">‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è</div>
            <div id="level">Î†àÎ≤®: 1</div>
        </div>

        <div class="series-hint" id="seriesHint" style="display: none;">
            ÏàòÎ†¥/Î∞úÏÇ∞ ÌåêÏ†ïÏùÑ ÏÉùÍ∞ÅÌï¥Î≥¥ÏÑ∏Ïöî!
        </div>

        <div class="bomb-launcher">
            <div class="launcher-slot" id="convergentSlot">
                <div class="bomb convergent-bomb" id="convergentBomb"></div>
            </div>
            <div class="launcher-slot" id="divergentSlot">
                <div class="bomb divergent-bomb" id="divergentBomb"></div>
            </div>
        </div>

        <div class="aim-indicator" id="aimIndicator"></div>
        <div class="aim-arrow" id="aimArrow"></div>



        <div id="gameOver">
            <h2>Í≤åÏûÑ Ïò§Î≤Ñ!</h2>
            <p>ÏµúÏ¢Ö Ï†êÏàò: <span id="finalScore">0</span></p>
            <p>Î†àÎ≤®: <span id="finalLevel">1</span></p>
            <button id="restartButton">üîÑ Îã§Ïãú ÏãúÏûë</button>
        </div>
    </div>

    <script>
        class VeniceSeriesGame {
            constructor() {
                this.canvas = document.getElementById('gameCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
                
                this.score = 0;
                this.hearts = 5;
                this.level = 1;
                this.series = [];
                this.bombs = [];
                this.explosions = [];
                this.gameRunning = false;
                this.gameStarted = false;
                this.activeColumns = []; // ÌòÑÏû¨ ÌôúÏÑ± Ïó¥ Ï∂îÏ†Å
                
                this.isAiming = false;
                this.aimingBombType = null;
                this.aimingBomb = null;
                this.aimAngle = 0;
                this.aimDirection = 1; // 1 for increasing, -1 for decreasing
                this.aimIndicator = document.getElementById('aimIndicator');
                this.aimArrow = document.getElementById('aimArrow');
                this.aimAnimationId = null;
                
                this.seriesPool = [
                    { 
                        display: '$\\sum \\frac{1}{n}$', 
                        convergent: false, 
                        name: "Ï°∞ÌôîÍ∏âÏàò (Î∞úÏÇ∞)" 
                    },
                    { 
                        display: '$\\sum \\frac{1}{n^2}$', 
                        convergent: true, 
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{1}{\\sqrt{n}}$', 
                        convergent: false, 
                        name: "p-Í∏âÏàò (Î∞úÏÇ∞)" 
                    },
                    { 
                        display: '$\\sum \\frac{1}{2^n}$', 
                        convergent: true, 
                        name: "Í∏∞ÌïòÍ∏âÏàò (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{1}{3^n}$', 
                        convergent: true, 
                        name: "Í∏∞ÌïòÍ∏âÏàò (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum 2^n$', 
                        convergent: false, 
                        name: "Í∏∞ÌïòÍ∏âÏàò (Î∞úÏÇ∞)" 
                    },
                    { 
                        display: '$\\sum \\frac{2^n}{n!}$', 
                        convergent: true, 
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{n!}{n^n}$', 
                        convergent: true, 
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{(-1)^n}{n}$', 
                        convergent: true, 
                        name: "ÍµêÎåÄÍ∏âÏàò (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{(-1)^n}{\\sqrt{n}}$', 
                        convergent: true, 
                        name: "ÍµêÎåÄÍ∏âÏàò (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{n}{n^2+1}$', 
                        convergent: false, 
                        name: "Í∑πÌïúÎπÑÍµê (Î∞úÏÇ∞)" 
                    },
                    { 
                        display: '$\\sum \\frac{1}{n \\ln n}$', 
                        convergent: false, 
                        name: "Ï†ÅÎ∂ÑÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)" 
                    },
                    { 
                        display: '$\\sum \\frac{\\ln n}{n^2}$', 
                        convergent: true, 
                        name: "Ï†ÅÎ∂ÑÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{n^2}{2^n}$', 
                        convergent: true, 
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{1}{n^3}$', 
                        convergent: true, 
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{\\sin n}{n^2}$', 
                        convergent: true, 
                        name: "ÎπÑÍµêÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{1}{n^4}$', 
                        convergent: true, 
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{n}{2^n}$', 
                        convergent: true, 
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{1}{n^{3/2}}$', 
                        convergent: true, 
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{1}{n \\ln^2 n}$', 
                        convergent: true, 
                        name: "Ï†ÅÎ∂ÑÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{(-1)^{n+1}}{n^2}$', 
                        convergent: true, 
                        name: "ÍµêÎåÄÍ∏âÏàò (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{n}{3^n}$', 
                        convergent: true, 
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)" 
                    },
                    { 
                        display: '$\\sum \\frac{1}{n^{1/2}}$', 
                        convergent: false, 
                        name: "p-Í∏âÏàò (Î∞úÏÇ∞)" 
                    },
                    { 
                        display: '$\\sum \\frac{n^3}{e^n}$', 
                        convergent: true, 
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)" 
                    },
                    {
                        display: '$\\sum \\frac{1}{n^2}$',
                        convergent: true,
                        name: "Ï†ÅÎ∂ÑÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n}$',
                        convergent: false,
                        name: "Ï†ÅÎ∂ÑÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n \\ln n}$',
                        convergent: false,
                        name: "Ï†ÅÎ∂ÑÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n (\\ln n)^2}$',
                        convergent: true,
                        name: "Ï†ÅÎ∂ÑÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n}{e^n}$',
                        convergent: true,
                        name: "Ï†ÅÎ∂ÑÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{\\sqrt{n}}$',
                        convergent: false,
                        name: "Ï†ÅÎ∂ÑÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^{3/2}}$',
                        convergent: true,
                        name: "Ï†ÅÎ∂ÑÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{\\ln n}{n^2}$',
                        convergent: true,
                        name: "Ï†ÅÎ∂ÑÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n}{n+1}$',
                        convergent: false,
                        name: "Î∞úÏÇ∞ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{2n^2 + 1}{3n^2 + 5}$',
                        convergent: false,
                        name: "Î∞úÏÇ∞ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\sin n$',
                        convergent: false,
                        name: "Î∞úÏÇ∞ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\cos\\left(\\frac{1}{n}\\right)$',
                        convergent: false,
                        name: "Î∞úÏÇ∞ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n!}{10^n}$',
                        convergent: false,
                        name: "Î∞úÏÇ∞ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n^2}{2^n}$',
                        convergent: true,
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{3n + 1}{2n + 5}$',
                        convergent: false,
                        name: "Î∞úÏÇ∞ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{2^n + 1}$',
                        convergent: true,
                        name: "ÎπÑÍµêÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^2 + 1}$',
                        convergent: true,
                        name: "ÎπÑÍµêÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{2n + 1}{n^3 + 1}$',
                        convergent: true,
                        name: "ÎπÑÍµêÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{\\sin^2 n}{n^2}$',
                        convergent: true,
                        name: "ÎπÑÍµêÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{\\sqrt{n^2 + 1}}$',
                        convergent: false,
                        name: "ÎπÑÍµêÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^2 - 1}$',
                        convergent: true,
                        name: "ÎπÑÍµêÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n + 1}{n^4 + n^2}$',
                        convergent: true,
                        name: "ÎπÑÍµêÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{3^n - 1}$',
                        convergent: true,
                        name: "ÎπÑÍµêÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n!}{3^n}$',
                        convergent: false,
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{2^n}{n!}$',
                        convergent: true,
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n^3}{2^n}$',
                        convergent: true,
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{3^n}{n^2}$',
                        convergent: false,
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n^n}{n! \\cdot 2^n}$',
                        convergent: false,
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{(2n)!}{(n!)^2 \\cdot 4^n}$',
                        convergent: false,
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n! \\cdot 2^n}{(2n)!}$',
                        convergent: true,
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{5^n}{n \\cdot 3^n}$',
                        convergent: false,
                        name: "ÎπÑÏú®ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\left(\\frac{2n}{3n+1}\\right)^n$',
                        convergent: true,
                        name: "Í∑ºÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\left(\\frac{n}{n+1}\\right)^{n^2}$',
                        convergent: true,
                        name: "Í∑ºÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^n}$',
                        convergent: true,
                        name: "Í∑ºÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\left(\\frac{3n+1}{4n-1}\\right)^n$',
                        convergent: true,
                        name: "Í∑ºÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\left(\\frac{\\ln n}{n}\\right)^n$',
                        convergent: true,
                        name: "Í∑ºÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\left(\\frac{1}{\\ln n}\\right)^n$',
                        convergent: true,
                        name: "Í∑ºÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^2 + n}$',
                        convergent: true,
                        name: "ÎπÑÍµêÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n^2 + 1}{n^4 + 2n + 1}$',
                        convergent: true,
                        name: "ÎπÑÍµêÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^3}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (p=3 > 1, ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n}{2^n}$',
                        convergent: true,
                        name: "ÎπÑÏú® ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{(-3)^{n-1}}{\\sqrt{n}}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞) ÎòêÎäî ÍµêÎåÄÍ∏âÏàò ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{\\sqrt{n}}{1+n^2}$',
                        convergent: true,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{5^n}$',
                        convergent: true,
                        name: "Í∏∞ÌïòÍ∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{5^n+1}$',
                        convergent: true,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{(-1)^n}{n^{1/2}}$',
                        convergent: true,
                        name: "ÍµêÎåÄÍ∏âÏàò ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^{1/2}}$',
                        convergent: false,
                        name: "p-Í∏âÏàò (p=1/2 <= 1, Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{3^n}{n^3}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞) ÎòêÎäî ÎπÑÏú® ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{3^n}{n!}$',
                        convergent: true,
                        name: "ÎπÑÏú® ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n+1}{n}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum (-1)^n \\frac{n+1}{n}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n}{n^2+1}$',
                        convergent: false,
                        name: "Ï†ÅÎ∂Ñ ÌåêÏ†ïÎ≤ï ÎòêÎäî ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Ï°∞ÌôîÍ∏âÏàòÏôÄ ÎπÑÍµê, Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum (-1)^n \\frac{n}{n^2+1}$',
                        convergent: true,
                        name: "ÍµêÎåÄÍ∏âÏàò ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{\\ln n}{n}$',
                        convergent: false,
                        name: "Ï†ÅÎ∂Ñ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n \\ln n}$',
                        convergent: false,
                        name: "Ï†ÅÎ∂Ñ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n+n!}$',
                        convergent: true,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\left( \\frac{1}{n} + \\frac{1}{n!} \\right)$',
                        convergent: false,
                        name: "Î∞úÏÇ∞ÌïòÎäî Í∏âÏàòÏùò Ìï© (Ï°∞ÌôîÍ∏âÏàò)"
                    },
                    {
                        display: '$\\sum \\frac{1}{\\sqrt{n^2+1}}$',
                        convergent: false,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Ï°∞ÌôîÍ∏âÏàòÏôÄ ÎπÑÍµê, Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n\\sqrt{n^2+1}}$',
                        convergent: true,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{\\sin 2n}{1+2^n}$',
                        convergent: true,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{2^{k-1}3^{k+1}}{k^2}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞) ÎòêÎäî ÎπÑÏú® ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{\\sqrt{n+1}}{n^2+1}$',
                        convergent: true,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1 \\cdot 3 \\cdot 5 \\cdots (2n-1)}{2 \\cdot 5 \\cdot 8 \\cdots (3n-1)}$',
                        convergent: true,
                        name: "ÎπÑÏú® ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{(-1)^n}{\\sqrt{n-1}}$',
                        convergent: true,
                        name: "ÍµêÎåÄÍ∏âÏàò ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum (-1)^n \\frac{\\ln n}{n}$',
                        convergent: true,
                        name: "ÍµêÎåÄÍ∏âÏàò ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{k}{\\sqrt{k}(k+1)}$',
                        convergent: false,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum (-1)^n \\cos(1/n^2)$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{k}{2+k\\sin k}$',
                        convergent: false,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\tan(1/n)$',
                        convergent: false,
                        name: "Í∑πÌïú ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Ï°∞ÌôîÍ∏âÏàòÏôÄ ÎπÑÍµê, Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum n \\sin(1/n)$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{4-\\cos n}{\\sqrt{n}}$',
                        convergent: false,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum 8 + (-1)^n \\frac{n}{n^2}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n!}{n!}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n^2+1}{e^n}$',
                        convergent: true,
                        name: "ÎπÑÏú® ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{\\ln k}{k^k}$',
                        convergent: true,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{e^n}{n^2}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{(-1)^n}{\\cosh n}$',
                        convergent: true,
                        name: "Ï†àÎåÄ ÏàòÎ†¥ (ÎπÑÍµê ÌåêÏ†ïÎ≤ï, ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum (-1)^j \\frac{\\sqrt{j}}{j+5}$',
                        convergent: true,
                        name: "ÍµêÎåÄÍ∏âÏàò ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{5^k}{3^k+4^k}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{(n!)^2}{(2n)!}$',
                        convergent: true,
                        name: "ÎπÑÏú® ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\left( \\frac{n}{n+1} \\right)^n$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{1+n \\cos n}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞) ÎòêÎäî ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^{1+1/n}}$',
                        convergent: false,
                        name: "Í∑πÌïú ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Ï°∞ÌôîÍ∏âÏàòÏôÄ ÎπÑÍµê, Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{(\\ln n)^n}$',
                        convergent: true,
                        name: "Í∑º ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\sqrt[n]{n^2-1}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n^2-1}{n^3+1}$',
                        convergent: false,
                        name: "Í∑πÌïú ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Ï°∞ÌôîÍ∏âÏàòÏôÄ ÎπÑÍµê, Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{10^n}{(n+1)4^{2n+1}}$',
                        convergent: true,
                        name: "ÎπÑÏú® ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n!}{100^n}$',
                        convergent: false,
                        name: "ÎπÑÏú® ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n \\pi^n}{(-3)^{n-1}}$',
                        convergent: false,
                        name: "ÎπÑÏú® ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n^{10}}{(-10)^{n+1}}$',
                        convergent: true,
                        name: "ÎπÑÏú® ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{\\cos(n\\pi/3)}{n!}$',
                        convergent: true,
                        name: "Ï†àÎåÄ ÏàòÎ†¥ (ÎπÑÍµê ÌåêÏ†ïÎ≤ï, ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n^{100}100^n}{n!}$',
                        convergent: true,
                        name: "ÎπÑÏú® ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{(2n)!}{(n!)^2}$',
                        convergent: false,
                        name: "ÎπÑÏú® ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\left( \\frac{n^2+1}{2n^2+1} \\right)^n$',
                        convergent: true,
                        name: "Í∑º ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{(-2)^n}{n^n}$',
                        convergent: true,
                        name: "Í∑º ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{(-1)^{n-1}}{(\\ln n)^n}$',
                        convergent: true,
                        name: "Ï†àÎåÄ ÏàòÎ†¥ (Í∑º ÌåêÏ†ïÎ≤ï, ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\left( \\frac{-2n}{n+1} \\right)^n$',
                        convergent: false,
                        name: "Í∑º ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\left( 1+\\frac{1}{n} \\right)^{n^2}$',
                        convergent: false,
                        name: "Í∑º ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum (\\arctan n)^n$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{(-1)^n \\ln n}{n}$',
                        convergent: true,
                        name: "Ï°∞Í±¥Î∂Ä ÏàòÎ†¥"
                    },
                    {
                        display: '$\\sum \\left( \\frac{1-n}{2+3n} \\right)^n$',
                        convergent: true,
                        name: "Ï†àÎåÄ ÏàòÎ†¥ (Í∑º ÌåêÏ†ïÎ≤ï, ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{(-9)^n}{n10^{n+1}}$',
                        convergent: true,
                        name: "Ï†àÎåÄ ÏàòÎ†¥ (ÎπÑÏú® ÌåêÏ†ïÎ≤ï, ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n5^{2n}}{10^{n+1}}$',
                        convergent: false,
                        name: "Î∞úÏÇ∞ (ÎπÑÏú® ÌåêÏ†ïÎ≤ï, Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{\\ln n}{n \\ln n}$',
                        convergent: false,
                        name: "Ï†ÅÎ∂Ñ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{\\sin(\\pi/6)}{1+n\\sqrt{n}}$',
                        convergent: true,
                        name: "Ï†àÎåÄ ÏàòÎ†¥ (ÎπÑÍµê ÌåêÏ†ïÎ≤ï, ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{(-1)^n \\arctan n}{n^2}$',
                        convergent: true,
                        name: "Ï†àÎåÄ ÏàòÎ†¥ (ÎπÑÍµê ÌåêÏ†ïÎ≤ï, ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{(-1)^n}{\\sqrt{n} \\ln n}$',
                        convergent: true,
                        name: "Ï°∞Í±¥Î∂Ä ÏàòÎ†¥"
                    },
                    {
                        display: '$\\sum (-1)^n e^{-n}$',
                        convergent: true,
                        name: "Ï†àÎåÄ ÏàòÎ†¥ (Í∏∞ÌïòÍ∏âÏàò, ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum (-1)^n \\frac{\\sqrt{n}}{2n+3}$',
                        convergent: true,
                        name: "Ï°∞Í±¥Î∂Ä ÏàòÎ†¥"
                    },
                    {
                        display: '$\\sum (-1)^{n+1} \\frac{n^2}{n^3+4}$',
                        convergent: true,
                        name: "Ï°∞Í±¥Î∂Ä ÏàòÎ†¥"
                    },
                    {
                        display: '$\\sum (-1)^n \\frac{n}{2^n}$',
                        convergent: true,
                        name: "Ï†àÎåÄ ÏàòÎ†¥ (ÎπÑÏú® ÌåêÏ†ïÎ≤ï, ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum (-1)^n e^{2/n}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum (-1)^n \\arctan n$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{\\sin(n+1/2)\\pi}{1+\\sqrt{n}}$',
                        convergent: true,
                        name: "Ï°∞Í±¥Î∂Ä ÏàòÎ†¥"
                    },
                    {
                        display: '$\\sum \\frac{n \\cos n\\pi}{2^n}$',
                        convergent: true,
                        name: "Ï†àÎåÄ ÏàòÎ†¥ (ÎπÑÏú® ÌåêÏ†ïÎ≤ï, ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum (-1)^n \\sin(\\pi/n)$',
                        convergent: true,
                        name: "Ï°∞Í±¥Î∂Ä ÏàòÎ†¥"
                    },
                    {
                        display: '$\\sum (-1)^n \\cos(\\pi/n)$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum (-1)^n \\frac{n^2}{5^n}$',
                        convergent: true,
                        name: "Ï†àÎåÄ ÏàòÎ†¥ (ÎπÑÏú® ÌåêÏ†ïÎ≤ï, ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum (-1)^n (\\sqrt{n+1}-\\sqrt{n})$',
                        convergent: true,
                        name: "Ï°∞Í±¥Î∂Ä ÏàòÎ†¥"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^3+8}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{\\sqrt{n-1}}$',
                        convergent: false,
                        name: "p-Í∏âÏàò (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n+1}{n\\sqrt{n}}$',
                        convergent: false,
                        name: "p-Í∏âÏàò (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n-1}{n^3+1}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{9^n}{3+10^n}$',
                        convergent: true,
                        name: "Í∏∞ÌïòÍ∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{6^n}{5^n-1}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{\\ln n}$',
                        convergent: false,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{k \\sin^2 k}{1+k^3}$',
                        convergent: true,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{\\sqrt{k}}{\\sqrt{k^3+4k+3}}$',
                        convergent: false,
                        name: "p-Í∏âÏàò (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{(2k-1)(k^2-1)}{(k+1)(k^2+4)^2}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1+\\cos n}{e^n}$',
                        convergent: true,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{\\sqrt{3n^4+1}}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{4^{n+1}}{3^n-2}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^n}$',
                        convergent: true,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{2}{\\sqrt{n+2}}$',
                        convergent: false,
                        name: "p-Í∏âÏàò (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n+1}{n^3+n}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n^2+n+1}{n^4+n^2}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{\\sqrt{1+n}}{2+n}$',
                        convergent: false,
                        name: "p-Í∏âÏàò (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{n+2}{(n+1)^3}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{5+2n}{(1+n^2)^2}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n+3^n}{n+2^n}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{e^n+1}{ne^n+1}$',
                        convergent: false,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n\\sqrt{n^2-1}}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{2+\\sin n}{n^2}$',
                        convergent: true,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n^2+\\cos^2 n}{n^3}$',
                        convergent: false,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\left(1+\\frac{1}{n}\\right)^2 e^{-n}$',
                        convergent: true,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{e^{1/n}}{n}$',
                        convergent: false,
                        name: "ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n!}$',
                        convergent: true,
                        name: "ÎπÑÏú® ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\sin(1/n)$',
                        convergent: false,
                        name: "Í∑πÌïú ÎπÑÍµê ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\sin^2(1/n)$',
                        convergent: true,
                        name: "Í∑πÌïú ÎπÑÍµê ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{\\sqrt{n+4}}{n^2}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{\\sqrt{n}}{1+n^{3/2}}$',
                        convergent: false,
                        name: "ÎπÑÍµêÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^2+4}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^2+2n+2}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n^3}{n^4+4}$',
                        convergent: false,
                        name: "Ï†ÅÎ∂Ñ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{3n-4}{n^2-2n}$',
                        convergent: false,
                        name: "p-Í∏âÏàò (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum k e^{-k}$',
                        convergent: true,
                        name: "Ï†ÅÎ∂Ñ ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum k e^{-k^2}$',
                        convergent: true,
                        name: "Ï†ÅÎ∂Ñ ÌåêÏ†ïÎ≤ï (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{n^2+n^3}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{n}{n^4+1}$',
                        convergent: true,
                        name: "p-Í∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{2+n}{1-2n}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{k^2}{k^2-2k+5}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum 3^{n+1}4^{-n}$',
                        convergent: true,
                        name: "Í∏∞ÌïòÍ∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum [(-0.2)^n + (0.6)^{n-1}]$',
                        convergent: true,
                        name: "Í∏∞ÌïòÍ∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{4+e^{-n}}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\frac{2^n+4^n}{e^n}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum (\\sin 100)^k$',
                        convergent: true,
                        name: "Í∏∞ÌïòÍ∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\frac{1}{1+(2/3)^n}$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\ln\\left(\\frac{n^2+1}{2n^2+1}\\right)$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum (\\sqrt{2})^{-k}$',
                        convergent: true,
                        name: "Í∏∞ÌïòÍ∏âÏàò (ÏàòÎ†¥)"
                    },
                    {
                        display: '$\\sum \\arctan n$',
                        convergent: false,
                        name: "Ìï≠ ÌåêÏ†ïÎ≤ï (Î∞úÏÇ∞)"
                    },
                    {
                        display: '$\\sum \\left( \\frac{3}{5^n} + \\frac{2}{n} \\right)$',
                        convergent: false,
                        name: "Î∞úÏÇ∞ÌïòÎäî Í∏âÏàòÏùò Ìï© (Ï°∞ÌôîÍ∏âÏàò)"
                    },
                    {
                        display: '$\\sum \\left( \\frac{1}{e^n} + \\frac{1}{n(n+1)} \\right)$',
                        convergent: true,
                        name: "ÏàòÎ†¥ÌïòÎäî Í∏âÏàòÏùò Ìï©"
                    }
                ];
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.gameLoop(); // Í≤åÏûÑ Î£®ÌîÑÎäî Ìï≠ÏÉÅ Ïã§Ìñâ
                // spawnSeriesÎäî Í≤åÏûÑ ÏãúÏûë ÌõÑÏóêÎßå Ìò∏Ï∂ú
            }
            
            startGameFromIntro() {
                const gameIntro = document.getElementById('gameIntro');
                const gameContainer = document.getElementById('gameContainer');
                if (gameIntro) {
                    gameIntro.style.display = 'none';
                }
                if (gameContainer) {
                    gameContainer.classList.add('active');
                }
                this.startGame();
            }
            
            startGame() {
                this.gameRunning = true;
                this.gameStarted = true;
                this.spawnSeries();
            }
            
            showHelpPopup() {
                const helpPopup = document.getElementById('helpPopup');
                if (helpPopup) {
                    helpPopup.style.display = 'flex';
                }
            }
            
            hideHelpPopup() {
                const helpPopup = document.getElementById('helpPopup');
                if (helpPopup) {
                    helpPopup.style.display = 'none';
                }
            }
            
            setupEventListeners() {
                const startButton = document.getElementById('startButton');
                const helpButton = document.getElementById('helpButton');
                const helpPopup = document.getElementById('helpPopup');
                
                if (startButton) {
                    startButton.addEventListener('click', () => {
                        this.startGameFromIntro();
                    });
                }
                
                if (helpButton) {
                    helpButton.addEventListener('click', () => {
                        this.showHelpPopup();
                    });
                }
                
                if (helpPopup) {
                    helpPopup.addEventListener('click', () => {
                        this.hideHelpPopup();
                    });
                    
                    // ÌÑ∞Ïπò Ïù¥Î≤§Ìä∏ÎèÑ Ï∂îÍ∞Ä
                    helpPopup.addEventListener('touchend', (e) => {
                        e.preventDefault();
                        this.hideHelpPopup();
                    });
                }
                
                const convergentBomb = document.getElementById('convergentBomb');
                const divergentBomb = document.getElementById('divergentBomb');
                
                if (convergentBomb && divergentBomb) {
                    this.addClickListeners(convergentBomb, 'convergent');
                    this.addClickListeners(divergentBomb, 'divergent');
                }
            }
            
            addClickListeners(element, type) {
                // ÎßàÏö∞Ïä§ Ïù¥Î≤§Ìä∏
                element.addEventListener('click', (e) => this.handleBombClick(element, type));
                
                // ÌÑ∞Ïπò Ïù¥Î≤§Ìä∏
                element.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    this.handleBombClick(element, type);
                });
            }
            
            handleBombClick(element, type) {
                if (!this.gameRunning) return;
                
                if (this.isAiming && this.aimingBombType === type) {
                    // Îëê Î≤àÏß∏ ÌÅ¥Î¶≠ - Î∞úÏÇ¨
                    this.fireBomb();
                } else {
                    // Ï≤´ Î≤àÏß∏ ÌÅ¥Î¶≠ - Ï°∞Ï§Ä ÏãúÏûë
                    this.startAiming(element, type);
                }
            }
            
            startAiming(element, type) {
                // Í∏∞Ï°¥ Ï°∞Ï§Ä Ï§ëÏßÄ
                this.stopAiming();
                
                this.isAiming = true;
                this.aimingBombType = type;
                this.aimingBomb = element;
                
                // ÏàòÎ†¥Ìè≠ÌÉÑÏùÄ 180ÎèÑÏóêÏÑú ÏãúÏûëÌï¥ÏÑú Î∞òÏãúÍ≥ÑÎ∞©Ìñ• (60~180ÎèÑ), Î∞úÏÇ∞Ìè≠ÌÉÑÏùÄ 0ÎèÑÏóêÏÑú ÏãúÏûëÌï¥ÏÑú ÏãúÍ≥ÑÎ∞©Ìñ• (0~120ÎèÑ)
                if (type === 'convergent') {
                    this.aimAngle = 180;
                    this.aimDirection = -1;
                } else {
                    this.aimAngle = 0;
                    this.aimDirection = 1;
                }
                
                // Ìè≠ÌÉÑÏóê Ï°∞Ï§Ä Ï§ë ÌëúÏãú
                element.classList.add('aiming');
                
                // Ï°∞Ï§Ä UI ÌëúÏãú
                const rect = element.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                this.aimIndicator.style.left = (centerX - 65) + 'px';
                this.aimIndicator.style.top = (centerY - 65) + 'px';
                this.aimIndicator.style.display = 'block';
                
                this.aimArrow.style.left = centerX + 'px';
                this.aimArrow.style.top = (centerY - 2) + 'px';
                this.aimArrow.style.display = 'block';
                
                // Ï°∞Ï§Ä Ïï†ÎãàÎ©îÏù¥ÏÖò ÏãúÏûë
                this.startAimAnimation();
            }
            
            startAimAnimation() {
                const animate = () => {
                    if (!this.isAiming) return;
                    
                    // Í∞ÅÎèÑ ÏóÖÎç∞Ïù¥Ìä∏
                    this.aimAngle += this.aimDirection * 2;
                    
                    if (this.aimingBombType === 'convergent') {
                        // ÏàòÎ†¥Ìè≠ÌÉÑ: 180ÎèÑÏóêÏÑú 60ÎèÑ ÏÇ¨Ïù¥Î•º Î∞òÏãúÍ≥ÑÎ∞©Ìñ•ÏúºÎ°ú
                        if (this.aimAngle <= 60) {
                            this.aimAngle = 60;
                            this.aimDirection = 1;
                        } else if (this.aimAngle >= 180) {
                            this.aimAngle = 180;
                            this.aimDirection = -1;
                        }
                    } else {
                        // Î∞úÏÇ∞Ìè≠ÌÉÑ: 0ÎèÑÏóêÏÑú 120ÎèÑ ÏÇ¨Ïù¥Î•º ÏãúÍ≥ÑÎ∞©Ìñ•ÏúºÎ°ú
                        if (this.aimAngle >= 120) {
                            this.aimAngle = 120;
                            this.aimDirection = -1;
                        } else if (this.aimAngle <= 0) {
                            this.aimAngle = 0;
                            this.aimDirection = 1;
                        }
                    }
                    
                    // ÌôîÏÇ¥Ìëú ÌöåÏ†Ñ (180ÎèÑ ÎπºÏÑú Ïò¨Î∞îÎ•∏ Î∞©Ìñ•ÏúºÎ°ú)
                    const displayAngle = this.aimAngle - 180;
                    this.aimArrow.style.transform = `rotate(${displayAngle}deg)`;
                    
                    this.aimAnimationId = requestAnimationFrame(animate);
                };
                animate();
            }
            
            stopAiming() {
                if (this.aimingBomb) {
                    this.aimingBomb.classList.remove('aiming');
                }
                
                this.isAiming = false;
                this.aimingBombType = null;
                this.aimingBomb = null;
                
                this.aimIndicator.style.display = 'none';
                this.aimArrow.style.display = 'none';
                
                if (this.aimAnimationId) {
                    cancelAnimationFrame(this.aimAnimationId);
                    this.aimAnimationId = null;
                }
            }
            
            getAvailableColumn() {
                // ÌôîÎ©¥ ÌÅ¨Í∏∞Ïóê Îî∞Îùº ÎèôÏ†ÅÏúºÎ°ú Ïó¥ Í∞ÑÍ≤© Ï°∞Ï†ï
                const minColumnWidth = this.canvas.width < 600 ? 120 : 160; // Ìú¥ÎåÄÌè∞ÏóêÏÑúÎäî Îçî Ï°∞Î∞ÄÌïòÍ≤å
                const startX = 80; // ÏãúÏûë ÏúÑÏπò
                const endX = this.canvas.width - 80; // ÎÅù ÏúÑÏπò (ÏµúÏÜå Ïó¨Ïú† Í≥µÍ∞Ñ)
                const availableWidth = endX - startX;
                
                // ÏµúÏÜå 3Í∞ú, ÏµúÎåÄ 8Í∞úÏùò Ïó¥ Î≥¥Ïû•
                let maxColumns = Math.max(3, Math.min(8, Math.floor(availableWidth / minColumnWidth)));
                const actualColumnWidth = availableWidth / maxColumns;
                
                console.log(`Canvas width: ${this.canvas.width}, Max columns: ${maxColumns}, Column width: ${actualColumnWidth}`);
                
                // ÏµúÍ∑º ÏÇ¨Ïö©Îêú Ïó¥Îì§ (Îçî ÏßßÏùÄ ÏãúÍ∞ÑÏúºÎ°ú)
                const recentColumns = this.activeColumns.filter(col => 
                    Date.now() - col.time < 800 // 0.8Ï¥àÎ°ú Îã®Ï∂ï
                );
                
                // ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Ïó¥Îì§ÏùÑ Î™®Îëê Ï∞æÍ∏∞
                const availableColumns = [];
                
                for (let i = 0; i < maxColumns; i++) {
                    const columnX = startX + i * actualColumnWidth + actualColumnWidth / 2; // Ï§ëÏïô Ï†ïÎ†¨
                    
                    // Ïù¥ Ïó¥Ïóê ÏµúÍ∑ºÏóê ÏÉùÏÑ±Îêú Ïπ¥ÎìúÍ∞Ä ÏûàÎäîÏßÄ ÌôïÏù∏ (Îçî ÏûëÏùÄ Î≤îÏúÑ)
                    const hasRecentCard = recentColumns.some(col => 
                        Math.abs(col.x - columnX) < actualColumnWidth * 0.7
                    );
                    
                    if (!hasRecentCard) {
                        availableColumns.push(columnX);
                    }
                }
                
                console.log(`Available columns: ${availableColumns.length}`, availableColumns);
                
                // Í∞ïÏ†úÎ°ú Îã§ÏñëÏÑ± Î≥¥Ïû•: Ïó∞ÏÜçÏúºÎ°ú 3Î≤à Í∞ôÏùÄ Ïó¥Ïù¥ ÎÇòÏò§ÏßÄ ÏïäÎèÑÎ°ù
                if (!this.lastUsedColumns) this.lastUsedColumns = [];
                
                // ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Ïó¥Ïù¥ ÏûàÏúºÎ©¥ ÎûúÎç§ÌïòÍ≤å ÏÑ†ÌÉù (Îã®, ÏµúÍ∑º ÏÇ¨Ïö©Ìïú Ïó¥ Ï†úÏô∏)
                if (availableColumns.length > 0) {
                    let filteredColumns = availableColumns;
                    
                    // ÏµúÍ∑º 2Í∞ú Ïó¥Í≥º Îã§Î•∏ Ïó¥Îßå ÏÑ†ÌÉù
                    if (this.lastUsedColumns.length >= 2) {
                        filteredColumns = availableColumns.filter(col => 
                            !this.lastUsedColumns.slice(-2).some(lastCol => 
                                Math.abs(col - lastCol) < actualColumnWidth * 0.5
                            )
                        );
                    }
                    
                    // ÌïÑÌÑ∞ÎßÅÎêú Ïó¥Ïù¥ ÏóÜÏúºÎ©¥ ÏõêÎûò Î∞∞Ïó¥ ÏÇ¨Ïö©
                    if (filteredColumns.length === 0) {
                        filteredColumns = availableColumns;
                    }
                    
                    const selectedColumn = filteredColumns[Math.floor(Math.random() * filteredColumns.length)];
                    
                    // ÏÇ¨Ïö©Ìïú Ïó¥ Í∏∞Î°ù (ÏµúÎåÄ 5Í∞úÍπåÏßÄÎßå Î≥¥Í¥Ä)
                    this.lastUsedColumns.push(selectedColumn);
                    if (this.lastUsedColumns.length > 5) {
                        this.lastUsedColumns.shift();
                    }
                    
                    console.log(`Selected column: ${selectedColumn}`);
                    return selectedColumn;
                }
                
                // Î™®Îì† Ïó¥Ïù¥ ÏÇ¨Ïö© Ï§ëÏù¥Î©¥ ÎûúÎç§Ìïú Ïó¥ ÏÇ¨Ïö© (Îã®, ÏµúÍ∑º ÏÇ¨Ïö©Ìïú Ïó¥ Ï†úÏô∏)
                let randomColumns = [];
                for (let i = 0; i < maxColumns; i++) {
                    const columnX = startX + i * actualColumnWidth + actualColumnWidth / 2;
                    randomColumns.push(columnX);
                }
                
                // ÏµúÍ∑º ÏÇ¨Ïö©Ìïú Ïó¥ Ï†úÏô∏
                if (this.lastUsedColumns.length > 0) {
                    const filteredRandomColumns = randomColumns.filter(col => 
                        !this.lastUsedColumns.slice(-1).some(lastCol => 
                            Math.abs(col - lastCol) < actualColumnWidth * 0.5
                        )
                    );
                    if (filteredRandomColumns.length > 0) {
                        randomColumns = filteredRandomColumns;
                    }
                }
                
                const randomColumn = randomColumns[Math.floor(Math.random() * randomColumns.length)];
                
                // ÏÇ¨Ïö©Ìïú Ïó¥ Í∏∞Î°ù
                this.lastUsedColumns.push(randomColumn);
                if (this.lastUsedColumns.length > 5) {
                    this.lastUsedColumns.shift();
                }
                
                console.log(`All columns busy, using random: ${randomColumn}`);
                return randomColumn;
            }
            
            spawnSeries() {
                if (!this.gameRunning) return;
                
                const seriesData = this.seriesPool[Math.floor(Math.random() * this.seriesPool.length)];
                const columnX = this.getAvailableColumn();
                
                console.log(`Spawning series at column: ${columnX}`);
                
                // 7% ÌôïÎ•†Î°ú Ìô©Í∏àÎπõ Ïπ¥Îìú ÏÉùÏÑ±
                const isGolden = Math.random() < 0.07;
                
                // Í∏∞Î≥∏ ÏÜçÎèÑÎ•º Îçî ÎäêÎ¶¨Í≤å ÏÑ§Ï†ïÌïòÍ≥† Î†àÎ≤®Ïóê Îî∞Îùº Ï†êÏßÑÏ†ÅÏúºÎ°ú Ï¶ùÍ∞Ä
                let baseSpeed = 0.3 + this.level * 0.25;
                
                // ÌôïÎ•†Ï†ÅÏúºÎ°ú Îçî Îπ†Î•∏ Ïπ¥Îìú ÏÉùÏÑ± (20% ÌôïÎ•†)
                const speedMultiplier = Math.random();
                if (speedMultiplier < 0.07) {
                    baseSpeed *= 1.5; // 50% Îçî Îπ†Î•¥Í≤å
                } else if (speedMultiplier < 0.2) {
                    baseSpeed *= 1.3; // 30% Îçî Îπ†Î•¥Í≤å
                }
                
                const series = {
                    x: columnX,
                    y: -50,
                    speed: baseSpeed,
                    convergent: seriesData.convergent,
                    display: seriesData.display,
                    isGolden: isGolden,
                    element: this.createSeriesElement(seriesData, isGolden)
                };
                
                // ÌôúÏÑ± Ïó¥Ïóê Ï∂îÍ∞Ä
                this.activeColumns.push({
                    x: columnX,
                    time: Date.now()
                });
                
                // Ïò§ÎûòÎêú Ïó¥ Ï†ïÎ≥¥ Ï†ïÎ¶¨ (1Ï¥à Ïù¥ÏÉÅ Îêú Í≤ÉÎì§)
                this.activeColumns = this.activeColumns.filter(col => 
                    Date.now() - col.time < 1000
                );
                
                this.series.push(series);
                
                setTimeout(() => this.spawnSeries(), Math.max(5000 - this.level * 100, 800));
            }
            
            createSeriesElement(seriesData, isGolden = false) {
                const div = document.createElement('div');
                div.className = isGolden ? 'series golden' : 'series';
                div.innerHTML = seriesData.display;
                div.style.left = '0px';
                div.style.top = '0px';
                
                // CSS Ïï†ÎãàÎ©îÏù¥ÏÖò ÎåÄÏã† JavaScriptÎ°ú ÏõÄÏßÅÏûÑ Ï†úÏñ¥
                div.style.animation = 'none';
                
                document.getElementById('gameContainer').appendChild(div);
                
                // MathJaxÎ°ú ÏàòÏãù Î†åÎçîÎßÅ
                if (window.MathJax && window.MathJax.typesetPromise) {
                    window.MathJax.typesetPromise([div]).catch((err) => console.log(err));
                }
                
                return div;
            }
            
            fireBomb() {
                if (!this.isAiming) return;
                
                const rect = this.aimingBomb.getBoundingClientRect();
                const startX = rect.left + rect.width / 2;
                const startY = rect.top + rect.height / 2;
                
                // Í∞ÅÎèÑÎ•º ÎùºÎîîÏïàÏúºÎ°ú Î≥ÄÌôò (180ÎèÑ ÎπºÏÑú Ïò¨Î∞îÎ•∏ Î∞©Ìñ•ÏúºÎ°ú)
                const angleRad = (this.aimAngle - 180) * Math.PI / 180;
                const speed = 20;
                
                const bomb = {
                    x: startX,
                    y: startY,
                    vx: Math.cos(angleRad) * speed,
                    vy: Math.sin(angleRad) * speed,
                    type: this.aimingBombType,
                    element: this.createFlyingBombElement(this.aimingBombType)
                };
                
                this.bombs.push(bomb);
                
                // Ï°∞Ï§Ä Î™®Îìú Ï¢ÖÎ£å
                this.stopAiming();
            }
            
            createFlyingBombElement(type) {
                const div = document.createElement('div');
                div.className = `bomb ${type}-bomb`;
                div.style.width = '40px';
                div.style.height = '40px';
                div.style.fontSize = '12px';
                document.getElementById('gameContainer').appendChild(div);
                return div;
            }
            
            update() {
                // Update series - JavaScriptÎ°ú ÏßÅÏ†ë ÏõÄÏßÅÏûÑ Ï†úÏñ¥
                this.series = this.series.filter(s => {
                    s.y += s.speed; // Îß§ ÌîÑÎ†àÏûÑÎßàÎã§ ÏúÑÏπò ÏóÖÎç∞Ïù¥Ìä∏
                    
                    // Ïπ¥Îìú ÏóòÎ¶¨Î®ºÌä∏ Ìè≠Ïùò Ï†àÎ∞òÎßåÌÅº center-align, 0~(canvas.width - elementWidth) ÏÇ¨Ïù¥Î°ú Ï†úÌïú
                    const elementWidth = s.element.offsetWidth;
                    const halfWidth = elementWidth / 2;
                    let leftPos = s.x - halfWidth;
                    
                    // Ï¢å/Ïö∞ Í≤ΩÍ≥Ñ Î∞ñÏúºÎ°ú ÎÇòÍ∞ÄÏßÄ ÏïäÎèÑÎ°ù clamp
                    const maxLeft = this.canvas.width - elementWidth;
                    leftPos = Math.max(0, Math.min(maxLeft, leftPos));
                    
                    s.element.style.left = leftPos + 'px';
                    s.element.style.top = s.y + 'px';
                    
                    // Ìà¨Î™ÖÎèÑÎèÑ ÏúÑÏπòÏóê Îî∞Îùº Ï°∞Ï†ï
                    if (s.y < 0) {
                        s.element.style.opacity = '0';
                    } else if (s.y < 50) {
                        s.element.style.opacity = (s.y / 50).toString();
                    } else {
                        s.element.style.opacity = '1';
                    }
                    
                    // ÌôîÎ©¥ ÏïÑÎûòÎ°ú Î≤óÏñ¥ÎÇòÎ©¥ Ï†úÍ±∞
                    if (s.y > this.canvas.height - 160) {
                        s.element.remove();
                        this.loseHeart(); // ÌôîÎ©¥ ÍπúÎ∞ï Ìö®Í≥º Ìè¨Ìï®
                        return false;
                    }
                    return true;
                });
                
                // Update bombs
                this.bombs = this.bombs.filter(b => {
                    b.x += b.vx;
                    b.y += b.vy;
                    b.element.style.left = b.x + 'px';
                    b.element.style.top = b.y + 'px';
                    
                    if (b.x < -50 || b.x > this.canvas.width + 50 || b.y < -50 || b.y > this.canvas.height + 50) {
                        b.element.remove();
                        return false;
                    }
                    
                    // Check collision with series
                    for (let i = 0; i < this.series.length; i++) {
                        const s = this.series[i];
                        if (this.checkCollision(b, s)) {
                            this.handleCollision(b, s, i);
                            b.element.remove();
                            return false;
                        }
                    }
                    
                    return true;
                });
                
                // Update explosions
                this.explosions = this.explosions.filter(e => {
                    e.time -= 16;
                    if (e.time <= 0) {
                        e.element.remove();
                        return false;
                    }
                    return true;
                });
            }
            
            checkCollision(bomb, series) {
                const seriesRect = series.element.getBoundingClientRect();
                const bombSize = 40; // Ìè≠ÌÉÑ ÌÅ¨Í∏∞Ïùò Ï†àÎ∞ò
                
                // Í∏âÏàòÏπ¥ÎìúÏùò Ïã§Ï†ú ÌôîÎ©¥ ÏúÑÏπòÏôÄ ÌÅ¨Í∏∞ (Ï§ëÏïô Ï†ïÎ†¨ Í≥†Î†§)
                const elementWidth = series.element.offsetWidth;
                const halfWidth = elementWidth / 2;
                let cardLeft = series.x - halfWidth;
                
                // Í≤ΩÍ≥Ñ Ï†úÌïú Ï†ÅÏö©
                const maxLeft = this.canvas.width - elementWidth;
                cardLeft = Math.max(0, Math.min(maxLeft, cardLeft));
                
                const cardRight = cardLeft + elementWidth;
                const cardTop = series.y;
                const cardBottom = series.y + series.element.offsetHeight;
                
                // Ìè≠ÌÉÑÏùò ÏòÅÏó≠
                const bombLeft = bomb.x - bombSize/2;
                const bombRight = bomb.x + bombSize/2;
                const bombTop = bomb.y - bombSize/2;
                const bombBottom = bomb.y + bombSize/2;
                
                // ÏÇ¨Í∞ÅÌòï Ï∂©Îèå Í∞êÏßÄ (AABB - Axis Aligned Bounding Box)
                return !(bombRight < cardLeft || 
                        bombLeft > cardRight || 
                        bombBottom < cardTop || 
                        bombTop > cardBottom);
            }
            
            handleCollision(bomb, series, seriesIndex) {
                const correct = (bomb.type === 'convergent') === series.convergent;
                
                if (correct) {
                    // Ï†ïÎãµ - Ìè≠Î∞ú Ìö®Í≥º (Ïπ¥Îìú Ï§ëÏïô ÏúÑÏπò Í≥ÑÏÇ∞)
                    const cardCenterX = series.x;
                    const cardCenterY = series.y + 25;
                    this.createCorrectExplosion(bomb.x, bomb.y, cardCenterX, cardCenterY, series.isGolden);
                    
                    // Ìô©Í∏à Ïπ¥ÎìúÏù∏ Í≤ΩÏö∞ ÌïòÌä∏ Ï¶ùÍ∞Ä
                    if (series.isGolden) {
                        this.gainHeart(cardCenterX, cardCenterY);
                    }
                    
                    this.score += 10 * this.level;
                    this.updateScore();
                    
                    // Í∏âÏàòÍ∞Ä Ìè≠Î∞úÍ≥º Ìï®Íªò Ï¶âÏãú ÏÇ¨ÎùºÏßê
                    series.element.style.animation = 'seriesExplode 0.4s ease-out forwards';
                    setTimeout(() => {
                        if (series.element && series.element.parentNode) {
                            series.element.remove();
                        }
                    }, 400);
                    
                } else {
                    // Ïò§Îãµ - Ìè≠ÌÉÑ Ìù°Ïàò Ìö®Í≥º ÌõÑ Ïπ¥ÎìúÎèÑ ÏÇ¨ÎùºÏßê (Ïπ¥Îìú Ï§ëÏïô ÏúÑÏπò Í≥ÑÏÇ∞)
                    const cardCenterX = series.x;
                    const cardCenterY = series.y + 25;
                    this.createAbsorptionEffect(bomb.x, bomb.y, cardCenterX, cardCenterY);
                    this.loseHeart();
                    
                    // Ïò§ÎãµÏù¥Ïñ¥ÎèÑ Ïπ¥ÎìúÎäî ÏÇ¨ÎùºÏßê (Ìù°Ïàò Ìö®Í≥º ÌõÑ)
                    series.element.style.animation = 'seriesDissolve 0.6s ease-out forwards';
                    setTimeout(() => {
                        if (series.element && series.element.parentNode) {
                            series.element.remove();
                        }
                    }, 600);
                }
                
                // Î∞∞Ïó¥ÏóêÏÑú Í∏âÏàò Ï†úÍ±∞
                this.series.splice(seriesIndex, 1);
            }
            
            createCorrectExplosion(bombX, bombY, seriesX, seriesY, isGolden = false) {
                // Î©îÏù∏ Ìè≠Î∞ú Ìö®Í≥º
                const explosion = document.createElement('div');
                explosion.className = 'explosion correct-explosion';
                explosion.style.left = (bombX - 50) + 'px';
                explosion.style.top = (bombY - 50) + 'px';
                document.getElementById('gameContainer').appendChild(explosion);
                
                // Í∏âÏàò ÏúÑÏπòÏóêÏÑúÏùò Ï∂îÍ∞Ä Ìè≠Î∞ú (Ï†ïÌôïÌïú Ï§ëÏã¨Ï†ê ÏÇ¨Ïö©)
                const seriesExplosion = document.createElement('div');
                seriesExplosion.className = 'explosion series-explosion';
                seriesExplosion.style.left = (seriesX - 40) + 'px';
                seriesExplosion.style.top = (seriesY - 40) + 'px';
                
                // Ìô©Í∏à Ïπ¥ÎìúÏù∏ Í≤ΩÏö∞ ÌäπÎ≥ÑÌïú Ìö®Í≥º
                if (isGolden) {
                    seriesExplosion.style.background = 'radial-gradient(circle, #FFD700, #FFA500, transparent)';
                    seriesExplosion.style.boxShadow = '0 0 60px #FFD700, 0 0 120px #FFD700';
                }
                
                document.getElementById('gameContainer').appendChild(seriesExplosion);
                
                // Ï†êÏàò ÌëúÏãú Ìö®Í≥º
                const scorePopup = document.createElement('div');
                scorePopup.className = 'score-popup';
                scorePopup.textContent = `+${10 * this.level}`;
                scorePopup.style.left = seriesX + 'px';
                scorePopup.style.top = (seriesY - 20) + 'px';
                document.getElementById('gameContainer').appendChild(scorePopup);
                
                this.explosions.push(
                    { element: explosion, time: 800 },
                    { element: seriesExplosion, time: 800 },
                    { element: scorePopup, time: 1000 }
                );
            }
            
            createAbsorptionEffect(bombX, bombY, seriesX, seriesY) {
                // Ìè≠ÌÉÑÏù¥ Í∏âÏàòÎ°ú Îπ®Î†§Îì§Ïñ¥Í∞ÄÎäî Ìö®Í≥º
                const absorption = document.createElement('div');
                absorption.className = 'absorption-effect';
                absorption.style.left = (bombX - 30) + 'px';
                absorption.style.top = (bombY - 30) + 'px';
                document.getElementById('gameContainer').appendChild(absorption);
                
                // Í∏âÏàòÍ∞Ä Îπ®Í∞õÍ≤å ÎπõÎÇòÎäî Ìö®Í≥º (Ï†ïÌôïÌïú Ï§ëÏã¨Ï†ê ÏÇ¨Ïö©)
                const seriesGlow = document.createElement('div');
                seriesGlow.className = 'series-reject-glow';
                seriesGlow.style.left = (seriesX - 40) + 'px';
                seriesGlow.style.top = (seriesY - 20) + 'px';
                seriesGlow.style.width = '80px';
                seriesGlow.style.height = '40px';
                document.getElementById('gameContainer').appendChild(seriesGlow);
                
                // Ïã§Ìå® ÌëúÏãú
                const failPopup = document.createElement('div');
                failPopup.className = 'fail-popup';
                failPopup.textContent = 'ÌãÄÎ†∏Ïñ¥Ïöî!';
                failPopup.style.left = seriesX + 'px';
                failPopup.style.top = (seriesY - 20) + 'px';
                document.getElementById('gameContainer').appendChild(failPopup);
                
                this.explosions.push(
                    { element: absorption, time: 600 },
                    { element: seriesGlow, time: 800 },
                    { element: failPopup, time: 1200 }
                );
            }
            
            gainHeart(x, y) {
                if (this.hearts < 5) {
                    this.hearts++;
                    this.updateHearts();
                    
                    // ÌïòÌä∏ ÌöçÎìù ÌåùÏóÖ Ìö®Í≥º
                    const heartPopup = document.createElement('div');
                    heartPopup.className = 'heart-gain-popup';
                    heartPopup.textContent = '‚ù§Ô∏è +1';
                    heartPopup.style.left = x + 'px';
                    heartPopup.style.top = (y - 30) + 'px';
                    document.getElementById('gameContainer').appendChild(heartPopup);
                    
                    this.explosions.push({ element: heartPopup, time: 1500 });
                }
            }
            
            loseHeart() {
                this.hearts--;
                this.updateHearts();
                this.createScreenFlash(); // ÌôîÎ©¥ ÍπúÎ∞ï Ìö®Í≥º
                if (this.hearts <= 0) {
                    this.gameOver();
                }
            }
            
            createScreenFlash() {
                const flash = document.createElement('div');
                flash.className = 'screen-flash';
                document.body.appendChild(flash);
                
                setTimeout(() => {
                    flash.remove();
                }, 500);
            }
            
            updateScore() {
                document.getElementById('score').textContent = `Ï†êÏàò: ${this.score}`;
                if (this.score > 0 && this.score % 100 === 0) {
                    this.level++;
                    document.getElementById('level').textContent = `Î†àÎ≤®: ${this.level}`;
                }
            }
            
            updateHearts() {
                const heartsText = '‚ù§Ô∏è'.repeat(this.hearts) + 'üñ§'.repeat(5 - this.hearts);
                document.getElementById('hearts').textContent = heartsText;
            }
            
            gameOver() {
                this.gameRunning = false;
                this.gameStarted = false;
                this.stopAiming(); // Ï°∞Ï§Ä Î™®Îìú Ï†ïÎ¶¨
                document.getElementById('finalScore').textContent = this.score;
                document.getElementById('finalLevel').textContent = this.level;
                document.getElementById('gameOver').style.display = 'block';
                
                // Îã§ÏãúÌïòÍ∏∞ Î≤ÑÌäº Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä (Ï§ëÎ≥µ Î∞©ÏßÄ)
                const restartButton = document.getElementById('restartButton');
                if (restartButton && !restartButton.hasAttribute('data-listener-added')) {
                    restartButton.addEventListener('click', () => {
                        this.restartGame();
                    });
                    restartButton.setAttribute('data-listener-added', 'true');
                }
            }
            
            restartGame() {
                this.resetGame();
                this.startGame();
            }
            
            resetGame() {
                // Í≤åÏûÑ ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
                this.score = 0;
                this.hearts = 5;
                this.level = 1;
                this.gameRunning = false;
                this.gameStarted = false;
                
                // Ïó¥ Í¥ÄÎ¶¨ Ï¥àÍ∏∞Ìôî
                this.activeColumns = [];
                this.lastUsedColumns = [];
                
                // ÌôîÎ©¥ ÏöîÏÜåÎì§ Ï†ïÎ¶¨
                this.series.forEach(s => s.element.remove());
                this.bombs.forEach(b => b.element.remove());
                this.explosions.forEach(e => e.element.remove());
                
                this.series = [];
                this.bombs = [];
                this.explosions = [];
                
                // UI ÏóÖÎç∞Ïù¥Ìä∏
                this.updateScore();
                this.updateHearts();
                document.getElementById('level').textContent = `Î†àÎ≤®: ${this.level}`;
                
                // Í≤åÏûÑ Ïò§Î≤Ñ ÌôîÎ©¥ Ïà®ÍπÄ
                document.getElementById('gameOver').style.display = 'none';
                
                // Í≤åÏûÑ Ïª®ÌÖåÏù¥ÎÑà Í≥ÑÏÜç Î≥¥Ïù¥ÎèÑÎ°ù Ïú†ÏßÄ
                const gameContainer = document.getElementById('gameContainer');
                if (gameContainer) {
                    gameContainer.classList.add('active');
                }
            }
            
            gameLoop() {
                // Í≤åÏûÑÏù¥ ÏãúÏûëÎêòÏóàÏùÑ ÎïåÎßå ÏóÖÎç∞Ïù¥Ìä∏
                if (this.gameRunning && this.gameStarted) {
                    this.update();
                }
                requestAnimationFrame(() => this.gameLoop());
            }
        }
        
        let game;
        
        function initializeGame() {
            game = new VeniceSeriesGame();
        }
        
        window.addEventListener('load', initializeGame);
        window.addEventListener('resize', () => {
            if (game) {
                game.canvas.width = window.innerWidth;
                game.canvas.height = window.innerHeight;
            }
        });
    </script>
</body>
</html>
</html>
